(()=>{function r(t,i){return Math.sqrt(Math.pow(t[0]-i[0],2)+Math.pow(t[1]-i[1],2))}function d(t,i,s){return x(t,M(T(j(i,t),r(i,t)),s))}function S(t,i){return d(t,i,r(t,i)/2)}function M(t,i){return typeof i=="number"&&(i=[i,i]),[t[0]*i[0],t[1]*i[1]]}function T(t,i){return typeof i=="number"&&(i=[i,i]),[t[0]/i[0],t[1]/i[1]]}function j(t,i){return typeof i=="number"&&(i=[i,i]),[t[0]-i[0],t[1]-i[1]]}function x(t,i){return typeof i=="number"&&(i=[i,i]),[t[0]+i[0],t[1]+i[1]]}function k(t){return function(i,s){return r(i.position,t)-r(s.position,t)}}function _(){let t=Object.values(spirits),i=t.filter(function(o){return!!o.hp}),s=t.filter(function(o){return!!o.hp&&o.id.substr(0,this_player_id.length)===this_player_id}),e=i.filter(function(o){return o.player_id!==this_player_id}),c=Object.values(stars).sort((o,p)=>r(o.position,base.position)-r(p.position,base.position))[0],l=Object.values(stars).sort((o,p)=>r(o.position,enemy_base.position)-r(p.position,enemy_base.position))[0];return{alive_spirits:i,my_alive_spirits:s,other_alive_spirits:e,my_star:c,enemy_star:l}}function v(t,i,s){function e(l,o){return Number(l.id.split("_")[1])-Number(o.id.split("_")[1])}t.sort(k(s));let c=t.splice(0,i).sort(e);return t.sort(e),c}var h=199;function C(t,i,s){var a;let e=[],c=Math.floor(r(s.position,i.position)/h)-2;for(let n=0;n<c;n++)e.push(d(s.position,i.position,(n+1)*h));let l=[];l.push(d(e[e.length-1],i.position,h)),l.push(d(i.position,e[e.length-1],h));let o=e.length+l.length,p={},f=0;for(let n of t){let b=t.filter((u,m)=>{var g;return m%o==e.length-1&&u.energy+((g=p[u.id])!=null?g:0*(u.energy_capacity/10))<u.energy_capacity}).sort((u,m)=>m.energy+p[m.id]-(u.energy+p[u.id]));f%o>e.length-1?n.energy===0||n.position.map(m=>Math.round(m)).join("_")===l[1].map(m=>Math.round(m)).join("_")&&n.energy!==n.energy_capacity?(n.energize(n),n.move(l[1])):(b.length===0?n.energize(s):(n.energize(b[0]),p[b[0].id]=((a=p[b[0].id])!=null?a:0)+1),n.move(l[0])):(n.move(e[f%o]),f%o==0?n.energize(s):n.energize(t[f-1])),f++}}var z=C;var{alive_spirits:G,my_alive_spirits:H,other_alive_spirits:V,my_star:J,enemy_star:K}=_();function D(t,i,s){for(let e of t)e.move(s.position),r(e.position,enemy_base.position)>200?e.energize(V.sort((c,l)=>r(c.position,e.position)-r(l.position,e.position))[0]):e.energize(s)}var y=D;var{alive_spirits:Z,my_alive_spirits:E,other_alive_spirits:ii,my_star:P,enemy_star:ti}=_();function N(){let t=[...E];z(v(t,25,S(base.position,P.position)),P,base),y(t,P,enemy_base)}var w=N;console.log("<h1>swarebot</h1>");var O=Date.now();w();var R=Date.now();console.log(`<h3 style="color:green">Tick took ${R-O}ms</h3>`);})();
